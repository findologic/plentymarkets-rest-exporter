#!/usr/bin/env php
<?php

declare(strict_types=1);

require_once __DIR__ . '/../vendor/autoload.php';

const DEBUG_DIR = __DIR__ . '/../debug';

$contents = scandir(DEBUG_DIR);
$contentsWithoutParentDirs = array_diff($contents, ['.', '..']);

echo sprintf("Starting to remove directories in %s...\n", DEBUG_DIR);
echo str_repeat('-', 20) . "\n";
foreach ($contentsWithoutParentDirs as $content) {
    $fullDir = sprintf('%s/%s', DEBUG_DIR, $content);

    if (!is_dir($fullDir)) { // We only care about directories.
        echo sprintf("Ignoring %s\n", $fullDir);
        continue;
    }

    echo sprintf("Removing %s...\n", $fullDir);
    echo exec(sprintf('rm -rf %s', $fullDir));
}

echo "Debug directory was cleared successfully!\n";
